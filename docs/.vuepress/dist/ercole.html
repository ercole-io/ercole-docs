<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ercole | Ercole</title>
    <meta name="description" content="Proactive Software Asset Management">
    
    
    <link rel="preload" href="/assets/css/0.styles.e7140c21.css" as="style"><link rel="preload" href="/assets/js/app.c04e065a.js" as="script"><link rel="preload" href="/assets/js/6.f4499a36.js" as="script"><link rel="preload" href="/assets/js/3.fd16be3a.js" as="script"><link rel="preload" href="/assets/js/11.50ba3429.js" as="script"><link rel="prefetch" href="/assets/js/10.a9b805ee.js"><link rel="prefetch" href="/assets/js/12.9503656c.js"><link rel="prefetch" href="/assets/js/13.be970c90.js"><link rel="prefetch" href="/assets/js/4.9faeed75.js"><link rel="prefetch" href="/assets/js/5.913f5e65.js"><link rel="prefetch" href="/assets/js/7.934cad43.js"><link rel="prefetch" href="/assets/js/8.ed4c31b6.js"><link rel="prefetch" href="/assets/js/9.9304ef14.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5c103d31.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e7140c21.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/ercole.svg" alt="Ercole" class="logo"> <span class="site-name can-hide">Ercole</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/introduction.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://repository.ercole.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://demo.ercole.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.sorint.it/ercole" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Professional support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/ercole-io/community" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/ercole-io/ercole" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/introduction.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://repository.ercole.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://demo.ercole.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.sorint.it/ercole" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Professional support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/ercole-io/community" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/ercole-io/ercole" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/introduction.html" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/introduction.html#main-functionalities" class="sidebar-link">Main functionalities</a></li></ul></li><li><a href="/installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation.html#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/installation.html#minimal-default-required-network-firewall-rules" class="sidebar-link">Minimal default required network/firewall rules</a></li><li class="sidebar-sub-header"><a href="/installation.html#instructions" class="sidebar-link">Instructions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li></ul></li><li><a href="/ercole.html" class="active sidebar-link">Ercole</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole.html#requirements" class="sidebar-link">Requirements</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole.html#minimal-default-required-network-firewall-rules" class="sidebar-link">Minimal default required network/firewall rules</a></li></ul></li><li class="sidebar-sub-header"><a href="/ercole.html#installation-guide" class="sidebar-link">Installation guide</a></li><li class="sidebar-sub-header"><a href="/ercole.html#ercole-configuration" class="sidebar-link">Ercole configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole.html#configuration-properties-list" class="sidebar-link">Configuration properties list</a></li></ul></li><li class="sidebar-sub-header"><a href="/ercole.html#notes-about-the-internal-repository" class="sidebar-link">Notes about the internal repository</a></li><li class="sidebar-sub-header"><a href="/ercole.html#ercole-cli-usage" class="sidebar-link">ercole CLI usage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole.html#enable-ercole-autocompletion" class="sidebar-link">Enable ercole autocompletion</a></li></ul></li><li class="sidebar-sub-header"><a href="/ercole.html#various-howto-examples" class="sidebar-link">Various HOWTO/examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole.html#how-to-install-an-artifact" class="sidebar-link">How to install an artifact</a></li><li class="sidebar-sub-header"><a href="/ercole.html#install-a-package-to-rhelx-from-the-ercole-reposervice" class="sidebar-link">Install a package to rhelX from the ercole-reposervice</a></li></ul></li></ul></li><li><a href="/ercole-web.html" class="sidebar-link">Ercole Web</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole-web.html#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/ercole-web.html#installation-guide" class="sidebar-link">Installation guide</a></li><li class="sidebar-sub-header"><a href="/ercole-web.html#configuration" class="sidebar-link">Configuration</a></li></ul></li><li><a href="/ercole-agents.html" class="sidebar-link">Ercole Agents</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole-agents.html#differences" class="sidebar-link">Differences</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#ercole-agent-go" class="sidebar-link">Ercole-agent (go)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole-agents.html#rhelx-installation" class="sidebar-link">RHELx installation</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#windows-installation" class="sidebar-link">Windows installation</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#operating-system-level-differences" class="sidebar-link">Operating system level differences</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#virtualization-target" class="sidebar-link">Virtualization target</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#oracle-database-target" class="sidebar-link">Oracle/Database target</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#oracle-exadata-target" class="sidebar-link">Oracle/Exadata target</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#microsoft-sqlserver-target" class="sidebar-link">Microsoft/SQLServer target</a></li></ul></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#ercole-agent-perl" class="sidebar-link">Ercole-agent-perl</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ercole-agents.html#solaris-installation" class="sidebar-link">Solaris installation</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#aix-installation" class="sidebar-link">AIX installation</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#hpux-installation" class="sidebar-link">HPUX installation</a></li><li class="sidebar-sub-header"><a href="/ercole-agents.html#configuration-6" class="sidebar-link">Configuration</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ercole"><a href="#ercole" aria-hidden="true" class="header-anchor">#</a> Ercole</h1> <p>Ercole is the backend component of ercole.io project.</p> <h2 id="requirements"><a href="#requirements" aria-hidden="true" class="header-anchor">#</a> Requirements</h2> <table><thead><tr><th style="text-align:center;">Component</th> <th>Prerequisite</th></tr></thead> <tbody><tr><td style="text-align:center;">Operating system</td> <td>CentOS, RedHat, OracleLinux 7/8</td></tr> <tr><td style="text-align:center;">RAM</td> <td>4GB</td></tr> <tr><td style="text-align:center;">Filesystem</td> <td>50GB (minimum)</td></tr> <tr><td style="text-align:center;">CPU</td> <td>2 VirtualCPU</td></tr> <tr><td style="text-align:center;">Database</td> <td>MongoDB &gt;= 4.2.0</td></tr></tbody></table> <h3 id="minimal-default-required-network-firewall-rules"><a href="#minimal-default-required-network-firewall-rules" aria-hidden="true" class="header-anchor">#</a> Minimal default required network/firewall rules</h3> <table><thead><tr><th style="text-align:center;">From</th> <th>To</th> <th>Port</th> <th>Proto</th></tr></thead> <tbody><tr><td style="text-align:center;">agents</td> <td>ercole-dataservice</td> <td>11111</td> <td>HTTP[1]</td></tr> <tr><td style="text-align:center;">users</td> <td>ercole-apiservice</td> <td>11113</td> <td>HTTP[1]</td></tr> <tr><td style="text-align:center;">users</td> <td>ercole-chartservice</td> <td>11116</td> <td>HTTP[1]</td></tr> <tr><td style="text-align:center;">users</td> <td>ercole-reposervice</td> <td>11114</td> <td>HTTP[1]</td></tr> <tr><td style="text-align:center;">agents</td> <td>ercole-reposervice</td> <td>11114</td> <td>HTTP[1]</td></tr></tbody></table> <p>[1] It is highly recommended to setup a reverse proxy between users/agents and ercole for avoiding to comunicate directly to the microservices using HTTP and opening too much ports, using for example nginx. See the instructions below.</p> <h4 id="suggested-network-firewall-rules"><a href="#suggested-network-firewall-rules" aria-hidden="true" class="header-anchor">#</a> Suggested network/firewall rules</h4> <table><thead><tr><th style="text-align:center;">From</th> <th>To</th> <th>Port</th> <th>Proto</th></tr></thead> <tbody><tr><td style="text-align:center;">ercole-reposervice</td> <td>*.github.com</td> <td>443</td> <td>HTTPS[1]</td></tr> <tr><td style="text-align:center;">ercole-reposervice</td> <td>repository.ercole.io</td> <td>443</td> <td>HTTPS[1]</td></tr></tbody></table> <p>[1] You can safely separate ercole-reposervice from the others microservices.</p> <h2 id="installation-guide"><a href="#installation-guide" aria-hidden="true" class="header-anchor">#</a> Installation guide</h2> <p>This installation guide is for RHEL8, but the steps can be easily adapted for RHEL7 .</p> <ul><li><code>curl https://repository.ercole.io/shared/ercole-rhel8-x86_64.repo | tee /etc/yum.repos.d/ercole-x86_64.repo</code></li> <li><code>yum install ercole</code></li> <li>If your machine has multiple IP addresses, check and fix endpoints in <code>/etc/ercole/conf.d/20-ercolesetup.toml</code></li> <li>Review ercole configuration with <code>ercole show-config</code></li> <li><code>systemctl start ercole</code></li></ul> <p>Ercole is configured automatically during the installation but you can edit the configuration by creating/files in <code>/etc/ercole/conf.d</code>. Its logs can be read with the command <code>journalctl -u ercole-dataservice -u ercole-alertservice -u ercole-apiservice -u ercole-reposervice -u ercole-chartservice</code> and can be updated as usually with a simple <code>yum update</code> unless in the new versions were introduced breaking changes.
It is also recommeded to also install <a href="https://stedolan.github.io/jq/download/" target="_blank" rel="noopener noreferrer">jq<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
After the installation you may want to <a href="#installation-guide-2">install ercole-web and configure nginx</a> or to <a href="#various-howto-examples">install artifacts</a>.</p> <h2 id="ercole-configuration"><a href="#ercole-configuration" aria-hidden="true" class="header-anchor">#</a> Ercole configuration</h2> <p>The configuration is written in <a href="https://github.com/toml-lang/toml" target="_blank" rel="noopener noreferrer">TOML<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> syntax and it is stored in these files/directory in ascending order of priority. The properties specified in low priority configuration files are overriden by the values in high priority configuration files. The configurations files are:</p> <ul><li><code>/opt/ercole/config.toml</code> (legacy config file)</li> <li><code>/usr/share/ercole/config.toml</code> (distributor config file)</li> <li><code>/etc/ercole/ercole.toml</code></li> <li><code>/etc/ercole/conf.d/*.toml</code> <ul><li><code>/etc/ercole/conf.d/20-ercolesetup.toml</code> is a file created by <code>ercole-setup</code> utility that contains known host specific configuration like remote endpoints, paths to certificates/keys and inter microservice configuration params.</li></ul></li> <li><code>~/.config/ercole.toml</code></li> <li><code>./config.toml</code></li> <li>An optional file specified to the <code>ercole</code> using the <code>-c</code> option.</li></ul> <p>It's highly recommended to configure it by creating files in <code>/etc/ercole/conf.d</code> (e.g <code>/etc/ercole/conf.d/50-myconf.toml</code>). If you change the <code>RemoteEndpoint</code>s of the microservices you may need to re-run <code>ercole-setup</code>(or <code>ercoleweb-setup</code> if you have installed ercole-web).</p> <h3 id="configuration-properties-list"><a href="#configuration-properties-list" aria-hidden="true" class="header-anchor">#</a> Configuration properties list</h3> <h4 id="mongodb"><a href="#mongodb" aria-hidden="true" class="header-anchor">#</a> Mongodb.*</h4> <ul><li><code>Mongodb.URI</code> is the <a href="https://docs.mongodb.com/manual/reference/connection-string/" target="_blank" rel="noopener noreferrer">uri<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> used to connect to the mongodb database. The default value is <code>mongodb://localhost:27017/ercole</code>.</li> <li><code>Mongodb.DBName</code> is the name of the mongodb database. The default value is <code>ercole</code>.</li> <li><code>Mongodb.Migrate</code> contains true if ercole should update/migrate the database schema, otherwise false. The default value is <code>true</code>. When ercole is started, it try to update the structure of the database by updating the schemas, updating the documents, creating the indexes, inserting default values.</li></ul> <h4 id="dataservice"><a href="#dataservice" aria-hidden="true" class="header-anchor">#</a> DataService.*</h4> <ul><li><code>DataService.RemoteEndpoint</code> contains the URI used by clients to connect to the dataservice.</li> <li><code>DataService.BindIP</code> contains the IP Address on which data service listen.</li> <li><code>DataService.Port</code> contains the port on which data service listen.</li> <li><code>DataService.LogHTTPRequest</code> enable the logging of the http request.</li> <li><code>DataService.LogInsertingHostdata</code> enable the logging of the inserting hostdata.</li> <li><code>DataService.LogDataPatching</code> enable the logging of data patching events.</li> <li><code>DataService.EnablePatching</code> enable the patching of hostdata. It's required for tagging the hosts and modifying Oracle Database license count values.</li> <li><code>DataService.AgentUsername</code> contains the username used to authenticate agents</li> <li><code>DataService.AgentPassword</code> contains the password used to authenticate agents</li> <li><code>DataService.CurrentHostCleaningJob.Crontab</code> contains the <a href="https://en.wikipedia.org/wiki/Cron" target="_blank" rel="noopener noreferrer">cron<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> schedule expression for automatic archivial of the current (non archived).</li> <li><code>DataService.CurrentHostCleaningJob.HourThreshold</code> contains the maximium number of hours in which a hostdata is considered up to date. After this threshold the host will be archived by the CurrentHostCleaningJob.</li> <li><code>DataService.CurrentHostCleaningJob.RunAtStartup</code> enable the running of the current host cleaning job at startup.</li> <li><code>DataService.ArchivedHostCleaningJob.Crontab</code> contains the <a href="https://en.wikipedia.org/wiki/Cron" target="_blank" rel="noopener noreferrer">cron<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> schedule expression for automatic deletion of archived hosts.</li> <li><code>DataService.ArchivedHostCleaningJob.HourThreshold</code> contains the maximium number of hours in which a archived hostdata is retained. After this threshold the archived host will be deleted by the ArchivedHostCleaningJob.</li> <li><code>DataService.ArchivedHostCleaningJob.RunAtStartup</code> enable the running of the archived host cleaning job at startup.</li> <li><code>DataService.FreshnessCheckJob.Crontab</code> contains the <a href="https://en.wikipedia.org/wiki/Cron" target="_blank" rel="noopener noreferrer">cron<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> schedule expression for automatic throws of NO_DATA alerts when a current host is not up to date.</li> <li><code>DataService.FreshnessCheckJob.HourThreshold</code> contains the maximium number of hours in which a hostdata is considered up to date. After this threshold a NO_DATA alert is thrown by the FreshnessCheckJob.</li> <li><code>DataService.FreshnessCheckJob.RunAtStartup</code> enable the running of the freshness check job at startup.</li></ul> <h4 id="alertservice"><a href="#alertservice" aria-hidden="true" class="header-anchor">#</a> AlertService.*</h4> <ul><li><code>AlertService.RemoteEndpoint</code> contains the URI used by the microservices to connect to the alertservice.</li> <li><code>AlertService.BindIP</code> contains the IP Address on which alert service listen.</li> <li><code>AlertService.Port</code> contains the port on which alert service listen.</li> <li><code>AlertService.LogHTTPRequest</code> enable the logging of the http request.</li> <li><code>AlertService.LogMessages</code> enable the logging of the processing queue messages.</li> <li><code>AlertService.LogAlertThrows</code> enable the logging of throwing alerts.</li> <li><code>AlertService.PublisherUsername</code> contains the username used to authenticate the microservices.</li> <li><code>AlertService.PublisherPassword</code> contains the password used to authenticate the microservices.</li> <li><code>AlertService.Emailer.Enabled</code> enable the notifying of the alerts by email.</li> <li><code>AlertService.Emailer.From</code> the source email address that is used to send emails.</li> <li><code>AlertService.Emailer.To</code> the destination email addresses to which are sent the emails.</li> <li><code>AlertService.Emailer.SMTPServer</code> SMTP server used to send email.</li> <li><code>AlertService.Emailer.SMTPPort</code> port of the SMTP server used to send email.</li> <li><code>AlertService.Emailer.SMTPUsername</code> username used to authenticate to the SMTP server.</li> <li><code>AlertService.Emailer.SMTPPassword</code> password used to authenticate to the SMTP server.</li> <li><code>AlertService.Emailer.DisableSSLCertificateValidation</code> true if disable the authentication of the SMTP server.</li></ul> <h4 id="apiservice"><a href="#apiservice" aria-hidden="true" class="header-anchor">#</a> APIService.*</h4> <ul><li><p><code>APIService.RemoteEndpoint</code> contains the URI used by the clients to connect to the apiservice.</p></li> <li><p><code>APIService.BindIP</code> contains the IP Address on which api service listen.</p></li> <li><p><code>APIService.Port</code> contains the port on which api service listen.</p></li> <li><p><code>APIService.LogHTTPRequest</code> enable the logging of the http request.</p></li> <li><p><code>APIService.ReadOnly</code> disable the APIs that modify the data</p></li> <li><p><code>APIService.EnableInsertingCustomPatchingFunction</code> enable the possibility to add/set a custom patching function.</p></li> <li><p><code>APIService.DebugOracleDatabaseAgreementsAssignmentAlgorithm</code> enable the verbosity of the assignment algorithm used to distribuite oracle database agreement licenses.</p></li> <li><p><code>APIService.AuthenticationProvider.Type</code> contains the authentication type: the allowed values are <code>basic</code> or <code>ldap</code>.</p> <ul><li><code>basic</code> authentication provider type needs:
<ul><li><code>APIService.AuthenticationProvider.Username</code> contains the username used to authenticate.
It's also used as username by <code>ercole</code> to perform requests to APIService.</li> <li><code>APIService.AuthenticationProvider.Password</code> contains the password used to authenticate password when <code>Type</code> is <code>basic</code>.
It's also used as password by <code>ercole</code> to perform requests to APIService.</li></ul></li> <li><code>ldap</code> authentication provider type needs:
<ul><li><code>APIService.AuthenticationProvider.Username</code> contains the username used by <code>ercole</code> to perform requests to APIService.</li> <li><code>APIService.AuthenticationProvider.Password</code> contains the password used by <code>ercole</code> to perform requests to APIService.</li> <li><code>APIService.AuthenticationProvider.Host</code>, contains the server used to authenticate the users.</li> <li><code>APIService.AuthenticationProvider.Port</code>, contains the port used to connect to the LDAP server. e.g. 389.</li> <li><code>APIService.AuthenticationProvider.LDAPBase</code>, contains the LDAP base of the realm. e.g. <code>dc=planetexpress,dc=com</code>.</li> <li><code>APIService.AuthenticationProvider.LDAPUseSSL</code>, enable/disable SSL for connecting to the server.</li> <li><code>APIService.AuthenticationProvider.LDAPBindDN</code>, contains the account used to authenticate to the LDAP server.</li> <li><code>APIService.AuthenticationProvider.LDAPBindPassword</code>, contains the password account used to authenticate to the LDAP server.</li> <li><code>APIService.AuthenticationProvider.LDAPUserFilter</code>, filter to search username matches, must contain <code>%s</code> that will be replaced with the username.</li> <li>Here it is a complete example working with a <a href="https://github.com/rroemhild/docker-test-openldap" target="_blank" rel="noopener noreferrer">docker OpenLDAP example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>[APIService.AuthenticationProvider]
Type = &quot;ldap&quot;
# User and Password used by other services to login to APIService
Username = &quot;hermes&quot; 
Password = &quot;hermes&quot;
Host = &quot;127.0.0.1&quot;
Port = 10389
LDAPBase = &quot;dc=planetexpress,dc=com&quot;
LDAPUseSSL = false
LDAPBindDN = &quot;cn=admin,dc=planetexpress,dc=com&quot;
LDAPBindPassword = &quot;GoodNewsEveryone&quot;
LDAPUserFilter = &quot;(uid=%s)&quot;
</code></pre></div></li></ul></li> <li><p><code>APIService.AuthenticationProvider.PrivateKey</code> contains the key used to sign the authentication JWT tokens.</p></li> <li><p><code>APIService.AuthenticationProvider.PublicKey</code> contains the key used to validate the authentication JWT tokens.</p></li> <li><p><code>APIService.AuthenticationProvider.TokenValidityTimeout</code> contains the maximum number of seconds on which the token is considered valid.</p></li> <li><p><code>APIService.OperatingSystemAggregationRules</code> are the rules used to map OS names + Version to product.</p></li></ul> <h4 id="reposervice"><a href="#reposervice" aria-hidden="true" class="header-anchor">#</a> RepoService.*</h4> <ul><li><code>RepoService.UpstreamRepositories</code> contains the upstream repository from which the artifacts are downloaded.
<ul><li><code>Name</code> contains the name of the repository.</li> <li><code>Type</code> contains the type of the repository. The allowed values are <code>github-release</code>, <code>directory</code>, <code>ercole-reposervice</code>.</li> <li><code>URL</code> contains the URL used to find the files. In the case of <code>github-release</code> it should the URL of the API that return the releases list. e.g https://api.github.com/repos/ercole-io/ercole-agent/releases. In the case of <code>directory</code> it should be the directory in which the artifacts are contained. In the case of <code>ercole-reposervice</code> it should be the url of a directory that contains the directory <code>all</code> and the file <code>index.json</code>.</li></ul></li> <li><code>RepoService.HTTP.Enable</code> contains true if reposervice should serve the files via HTTP.</li> <li><code>RepoService.HTTP.RemoteEndpoint</code> contains the url used by clients to reach the repository via HTTP.</li> <li><code>RepoService.HTTP.BindIP</code> contains the IP on which reposervice listen for HTTP requests.</li> <li><code>RepoService.HTTP.Port</code> contains the port on which reposervice listen for HTTP requests.</li> <li><code>RepoService.HTTP.LogHTTPRequest</code> true if reposervice should log for every received HTTP request.</li></ul> <h4 id="chartservice"><a href="#chartservice" aria-hidden="true" class="header-anchor">#</a> ChartService.*</h4> <ul><li><code>ChartService.RemoteEndpoint</code> contains the URI used by the clients to connect to the chartservice.</li> <li><code>ChartService.BindIP</code> contains the IP Address on which chart service listen.</li> <li><code>ChartService.Port</code> contains the port on which chart service listen.</li> <li><code>ChartService.LogHTTPRequest</code> enable the logging of the http request.</li></ul> <h2 id="notes-about-the-internal-repository"><a href="#notes-about-the-internal-repository" aria-hidden="true" class="header-anchor">#</a> Notes about the internal repository</h2> <p>Ercole repository is tought to be public and visibile to everyone so it shouldn't contains private informations like the password or private keys. The main ercole repository is <a href="https://repository.ercole.io" target="_blank" rel="noopener noreferrer">https://repository.ercole.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It is served via HTTP so you can download files in various mode like:</p> <ul><li><code>wget http://myawesomeercole2.local:11114/ping.txt</code></li> <li><code>curl http://myawesomeercole2.local:11114/ping.txt &gt; /tmp/ping.txt</code>
Some repository files/directory are managed using the <code>ercole repo</code> subcommands. Others files/directories can be safely modified.</li></ul> <p>Managed files:</p> <ul><li><code>ping.txt</code> is a file used to check the liveness of the microservices. It's really managed but it's recommended to not modify it.</li> <li><code>index.json</code> contains the cached list of available artifacts. Can be safely removed for forcing the rebuild of the cache when the next <code>repo</code> subcommands is run.</li> <li><code>all/</code> contains the symlinks to all installed (and managed) artifacts.</li> <li><code>rhel/*</code> contains the RPM repositories of the packages for every RHEL versions.</li> <li><code>win/*</code> contains various ercole-agent setup files for windows.</li> <li><code>aix/</code> contains the RPM repositories of the packages for every AIX versions.</li> <li><code>aix-tar-gz/</code> alternative artifacts of agents for AIX.</li> <li><code>hpux/</code> contains the agents for HPUX.</li></ul> <p>Unmanaged known files:</p> <ul><li><code>shared/</code> contains various files like some .repo files.</li> <li><code>snapshots/</code> is a directory present in <a href="https://repository.ercole.io" target="_blank" rel="noopener noreferrer">https://repository.ercole.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that is used to store snapshots of all projects. The snapshots aren't tought to be used outside the development.</li></ul> <p>It may be a good idea to create multiple ercole reposervice for directory for stable/testing/unstable or PRD/COL/TST.</p> <h2 id="ercole-cli-usage"><a href="#ercole-cli-usage" aria-hidden="true" class="header-anchor">#</a> <code>ercole</code> CLI usage</h2> <p>Ercole is thought as a CLI program, you can run commands and get help about them with the <code>--help</code> flag.</p> <p>Relevant commands are:</p> <ul><li><code>ercole version</code> print the version of ercole.</li> <li><code>ercole show-config</code> show the ercole's actual configuration.</li> <li><code>ercole fire-hostdata</code> send a hostdata stored in a json file or from a stdin to ercole-dataservice.</li> <li><code>ercole migrate</code> migrate the structure of the mongodb database from a previous one to the latest.</li> <li><code>ercole serve</code> start all the services. You can select explicity which services starts using <code>--enable</code> options like <code>--enable-dataservice</code>.</li> <li><code>ercole repo</code> is a group of subcommands used to manage the repository:
<ul><li><code>list</code> lists the artifacts detected in the upstream repositories.</li> <li><code>info</code> get the informations about the specified artifacts.</li> <li><code>install</code> download and install the specified artifacts.</li> <li><code>remove</code> remove the specified artifacts.</li> <li><code>update</code> try to find newer version of all installed artifacts and install them.</li></ul></li></ul> <h3 id="enable-ercole-autocompletion"><a href="#enable-ercole-autocompletion" aria-hidden="true" class="header-anchor">#</a> Enable <code>ercole</code> autocompletion</h3> <p>To load autocompletion for each session, execute once:</p> <div class="language- extra-class"><pre class="language-text"><code>$ ercole completion bash &gt; /etc/bash_completion.d/ercole
</code></pre></div><h2 id="various-howto-examples"><a href="#various-howto-examples" aria-hidden="true" class="header-anchor">#</a> Various HOWTO/examples</h2> <h3 id="how-to-install-an-artifact"><a href="#how-to-install-an-artifact" aria-hidden="true" class="header-anchor">#</a> How to install an artifact</h3> <ul><li>The first thing to do is to find the available artifacts by running the command: <code>ercole repo list</code></li> <li>Choose the artifact you want.</li> <li>Install it with for example with the command: <code>ercole repo install ercole-agent/ercole-agent-rhel7@1.5.0</code></li></ul> <h3 id="install-a-package-to-rhelx-from-the-ercole-reposervice"><a href="#install-a-package-to-rhelx-from-the-ercole-reposervice" aria-hidden="true" class="header-anchor">#</a> Install a package to rhelX from the ercole-reposervice</h3> <p>The first thing to do is to create a repository file .</p> <ul><li><code>curl https://repository.ercole.io/shared/ercole-rhel7-x86_64.repo | tee /etc/yum.repos.d/ercole.repo</code></li></ul> <p>The next thing is to install the package with yum or dnf.</p> <ul><li><code>yum install ercole-agent</code></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/installation.html" class="prev">
          Installation
        </a></span> <span class="next"><a href="/ercole-web.html">
          Ercole Web
        </a>
        →
      </span></p></div> </main></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c04e065a.js" defer></script><script src="/assets/js/6.f4499a36.js" defer></script><script src="/assets/js/3.fd16be3a.js" defer></script><script src="/assets/js/11.50ba3429.js" defer></script>
  </body>
</html>
